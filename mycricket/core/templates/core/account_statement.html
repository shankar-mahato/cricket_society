{% extends 'core/base.html' %}

{% block title %}Account Statement{% endblock %}

{% block content %}
<div class="page-header">
    <h1>Account Statement</h1>
    <p>View your complete transaction history</p>
</div>

<div class="card">
    <div class="card-header">
        <h2>Summary</h2>
    </div>
    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; margin-bottom: 24px;">
        <div style="background: linear-gradient(135deg, #4299e1 0%, #3182ce 100%); padding: 20px; border-radius: 8px; color: white;">
            <div style="font-size: 14px; opacity: 0.9; margin-bottom: 8px;">Current Balance</div>
            <div style="font-size: 28px; font-weight: 700;">₹{{ wallet.balance|floatformat:2 }}</div>
        </div>
        <div style="background: linear-gradient(135deg, #48bb78 0%, #38a169 100%); padding: 20px; border-radius: 8px; color: white;">
            <div style="font-size: 14px; opacity: 0.9; margin-bottom: 8px;">Total Credits</div>
            <div style="font-size: 28px; font-weight: 700;">₹{{ total_credits|floatformat:2 }}</div>
        </div>
        <div style="background: linear-gradient(135deg, #f56565 0%, #e53e3e 100%); padding: 20px; border-radius: 8px; color: white;">
            <div style="font-size: 14px; opacity: 0.9; margin-bottom: 8px;">Total Debits</div>
            <div style="font-size: 28px; font-weight: 700;">₹{{ total_debits|floatformat:2 }}</div>
        </div>
    </div>
</div>

<div class="card">
    <div class="card-header">
        <h2>Transaction History</h2>
    </div>
    {% if transactions %}
    <div class="table-wrapper">
        <table>
            <thead>
                <tr>
                    <th>Date & Time</th>
                    <th>Type</th>
                    <th>Amount</th>
                    <th>Balance After</th>
                    <th>Description</th>
                </tr>
            </thead>
            <tbody>
                {% for transaction in transactions %}
                <tr>
                    <td>{{ transaction.created_at|date:"M d, Y H:i" }}</td>
                    <td>
                        <span class="badge {% if transaction.transaction_type in 'deposit,bet_won,refund' %}badge-success{% else %}badge-warning{% endif %}">
                            {{ transaction.get_transaction_type_display }}
                        </span>
                    </td>
                    <td style="font-weight: 600; color: {% if transaction.transaction_type in 'deposit,bet_won,refund' %}#48bb78{% else %}#f56565{% endif %};">
                        {% if transaction.transaction_type in 'deposit,bet_won,refund' %}+{% else %}-{% endif %}₹{{ transaction.amount|floatformat:2 }}
                    </td>
                    <td>₹{{ transaction.balance_after|floatformat:2 }}</td>
                    <td>{{ transaction.description|default:"-" }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
    {% else %}
    <p style="text-align: center; padding: 40px; color: #718096;">No transactions found</p>
    {% endif %}
</div>
{% endblock %}

