{% extends 'core/base.html' %}

{% block title %}Bet History{% endblock %}

{% block content %}
<div class="page-header">
    <h1>Bet History</h1>
    <p>View all your betting sessions and bets</p>
</div>

<div class="card">
    <div class="card-header">
        <h2>Betting Sessions</h2>
    </div>
    {% if sessions %}
    <div class="table-wrapper">
        <table>
            <thead>
                <tr>
                    <th>Match</th>
                    <th>Opponent</th>
                    <th>Status</th>
                    <th>Bet Amount</th>
                    <th>Winnings</th>
                    <th>Created</th>
                    <th>Action</th>
                </tr>
            </thead>
            <tbody>
                {% for session in sessions %}
                <tr>
                    <td>
                        <strong>{{ session.match.team_a.name }} vs {{ session.match.team_b.name }}</strong><br>
                        <small style="color: #718096;">{{ session.match.match_title }}</small>
                    </td>
                    <td>
                        {% if session.better_a == user %}
                            {{ session.better_b.username }}
                        {% else %}
                            {{ session.better_a.username }}
                        {% endif %}
                    </td>
                    <td>
                        <span class="badge {% if session.status == 'completed' %}badge-success{% elif session.status == 'live' %}badge-warning{% else %}badge-secondary{% endif %}">
                            {{ session.get_status_display }}
                        </span>
                    </td>
                    <td style="font-weight: 600;">₹{{ session.fixed_bet_amount|floatformat:2 }}</td>
                    <td style="font-weight: 600; color: #48bb78;">
                        {% if session.better_a == user %}
                            ₹{{ session.better_a_total_winnings|floatformat:2 }}
                        {% else %}
                            ₹{{ session.better_b_total_winnings|floatformat:2 }}
                        {% endif %}
                    </td>
                    <td>{{ session.created_at|date:"M d, Y" }}</td>
                    <td>
                        <a href="{% url 'core:session_detail' session.id %}" class="btn" style="padding: 6px 12px; font-size: 12px;">View</a>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
    {% else %}
    <p style="text-align: center; padding: 40px; color: #718096;">No betting sessions found</p>
    {% endif %}
</div>
{% endblock %}



